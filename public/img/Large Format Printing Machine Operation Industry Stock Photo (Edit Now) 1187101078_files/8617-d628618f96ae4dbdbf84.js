"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8617],{8617:function(e,t,n){n.d(t,{VL:function(){return F}});var o=n(5152),i=n(67294),r=n(92252),s=n(2297),a=n(11409),c=n(70790),l=n(96078),d=n(43703),u=n(56384),p=n(92809),f=n(30266),v=n(809),m=n.n(v),g=n(40821),C=n(88789),y=n(19846),T=n(80336),b=n(65306),w=n(16538),S=n(64223),h=n(6701),I=n(34552),O=n(10483),A=n(88041),P=n(29996),j=n(85884),k=n(75114),x=n(26237),D=function(e){var t=e.queryParams;return(0,C.nS)({queryParams:t}).formattedUrl};function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=function(e){var t=e.collectionId,n=e.mappedAssetType,o=e.assetId;return"".concat(t,"-").concat(b.EY[n],"-").concat(o)},U=function(e){var t=e.assetId,n=e.asset,o=n.id,i=n.tier,r=void 0===i?10:i,s=n.src,a=n.aspect,c=n.width,l=n.height;return{metadata:{notes:{media_id:t,alpha_num_id:o,rex_id:o,media_type:T.gP,tier:r,media:{aspect:a,width:c,height:l,url:s}}}}},V=function(){var e=(0,f.Z)(m().mark((function e(t){var n,o,i,r,s,c,l,d,u,p,f,v,g;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.isRexEditorial,i=t.collectionId,r=t.verificationCode,s=t.setAsCover,c=t.firstAsset,l=t.collectionType,(d=(0,a.A8)(c))===T.VT){e.next=4;break}return e.abrupt("return");case 4:return u={id:i,verificationCode:r,collectionType:l},p=(0,C.Yz)({queryParams:u}).formattedUrl,e.next=8,j.uS.get(p).then((function(e){return(0,k.O)(e.data)||{}}));case 8:if(null!==(f=e.sent)&&void 0!==f&&null!==(n=f.coverItem)&&void 0!==n&&n.id){e.next=14;break}return v=(0,a.OP)({asset:c,isRexEditorial:o}),g=M({collectionId:i,mappedAssetType:d,assetId:v}),e.next=14,s({collection:{id:i},mediaItem:{id:g}});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=n(65806),Z=n(1434),B=n(10219),J=n(85893),N=["isOpen"];function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var L=(0,o.default)((function(){return Promise.all([n.e(79351),n.e(52387),n.e(110),n.e(39803),n.e(11514),n.e(28670),n.e(10278),n.e(55701),n.e(98365),n.e(31088)]).then(n.bind(n,8599)).then((function(e){return e.CollectionModal}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[8599]},modules:["../components/Collections/AddToCollectionsViews/DynamicCollectionModal.jsx -> ./CollectionModal"]}}),G=function(e){var t=e.isOpen,n=(0,B.Z)(e,N);return(0,u.B)(t)&&(0,J.jsx)(L,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isOpen:t},n))},z=(0,o.default)((function(){return n.e(46442).then(n.bind(n,46442)).then((function(e){return e.LazyAddToCollectionModal}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[46442]},modules:["../components/Collections/AddToCollectionsViews/useAddToCollectionViews.jsx -> @/components/AddToCollectionModal/lazy"]}}),H=(0,o.default)((function(){return n.e(95372).then(n.bind(n,95372)).then((function(e){return e.Snackbar}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[95372]},modules:["../components/Collections/AddToCollectionsViews/useAddToCollectionViews.jsx -> ./Snackbar"]}}),Y=function(e){var t=e.assets,n=e.assetType,o=e.collectionId,s=e.collectionTitle,a=e.gridItems,l=e.isDialogActive,d=e.isSnackBarOpen,p=e.onAddToCollections,f=e.onAlertSnackbarClose,v=e.onAddToCollectionsComplete,m=e.redirectToCDPAction,g=e.setIsDialogActive,C=e.showCopyToModalTitle,y=e.status,T=e.verificationCode,b=(0,Z.p)(r.vb),w=(0,u.B)(t),S=(0,c.j)(),h=(0,i.useCallback)((function(){return g(!1)}),[g]);return w?b||S?(0,J.jsx)(z,{onClose:h,isOpen:l,items:t,onAddToCollectionsComplete:v}):(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(G,{assets:t,assetType:n,collectionId:o,gridItems:a,isOpen:l,onAddToCollections:p,setIsDialogActive:g,showCopyToModalTitle:C}),(0,J.jsx)(H,{assetType:n,collectionId:o,collectionTitle:s,isOpen:d,onAlertSnackbarClose:f,redirectToCDPAction:m,status:y,verificationCode:T})]}):null};Y.defaultProps={assetType:"",assets:null,gridItems:null,onAddToCollectionsComplete:void 0,redirectToCDPAction:{}};var F=function(e){var t=e.initialAssetType,n=(0,i.useState)(!1),o=n[0],r=n[1],c=(0,i.useState)(!1),u=c[0],v=c[1],k=(0,i.useState)(!1),_=k[0],Z=k[1],B=(0,i.useState)(""),J=B[0],N=B[1],q=(0,i.useState)(null),L=q[0],G=q[1],z=(0,i.useState)(t),H=z[0],F=z[1],W=(0,i.useState)(null),X=W[0],K=W[1],Q=(0,i.useState)(null),$=Q[0],ee=Q[1],te=(0,i.useState)(null),ne=te[0],oe=te[1],ie=(0,R.B)(),re=(0,l.c)(),se=(0,d.L)(),ae=(0,i.useState)({shouldHandleRedirect:!1,redirectToCollectionDetailsPage:se}),ce=ae[0],le=ae[1],de=function(){var e=(0,i.useState)({status:"",error:void 0}),t=e[0],n=e[1],o=(0,i.useState)(""),r=o[0],s=o[1],c=(0,i.useState)(""),l=c[0],d=c[1],u=(0,O.J)(),v=(0,x.w)().setAsCover,k=(0,A.D)().isBrandSstk,_=(0,P.yh)().analytics,R=(0,S.UM)(_);return{add:(0,i.useCallback)(function(){var e=(0,f.Z)(m().mark((function e(t){var o,i,r,c,l,f,S,O,A,P,x,_,Z,B,J,N,q,L,G,z,H,Y,F,W;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.assets,i=t.assetType,r=t.gridItems,c=t.groupedOptions,l=t.id,f=t.title,S=t.verificationCode,O=t.pageSection,A=t.listId,P=(0,h.wZ)({assetType:i,isBrandSstk:k}),e.prev=2,n({status:y.MR,error:void 0}),x=(0,a.Xo)(i),_=l,Z=S,c&&c.length&&(B=c.find((function(e){return e.title===f})))&&(_=B.id,Z=B.verificationCode),_){e.next=19;break}return J=(0,C.A6)().formattedUrl,N={data:{attributes:{title:f,collectionType:P,isPublic:!1},type:b.Ul}},e.next=13,j.uS.post(J,N);case 13:q=e.sent,L=q.data,G=L.id,z=L.attributes.verificationCode,_=G,Z=z;case 19:return H={data:o.map((function(e){var t=(0,a.OP)({asset:e,isRexEditorial:x}),n=(0,a.A8)(e);return E({type:b.A8,id:M({collectionId:_,mappedAssetType:n,assetId:t})},n===T.VT&&U({assetId:t,asset:e}))}))},Y=(0,C.mp)({urlParams:{id:_},queryParams:{isRexEditorial:x}}).formattedUrl,F=(0,I.y)(R),e.next=24,j.uS.post(Y,H,F?{headers:(0,p.Z)({},w.as,F)}:void 0);case 24:return W=o[0],e.next=27,V({isRexEditorial:x,collectionId:_,verificationCode:Z,setAsCover:v,firstAsset:W,collectionType:P});case 27:u({collectionId:_,collectionName:f,gridItems:r,assets:o,pageSection:O,listId:A}),s(_),d(Z),e.next=35;break;case 32:e.prev=32,e.t0=e.catch(2),n({status:y.cM,error:e.t0});case 35:return e.prev=35,e.next=38,(0,g.JG)(D({queryParams:{"filter[type]":P}}));case 38:return e.finish(35);case 39:case"end":return e.stop()}}),e,null,[[2,32,35,39]])})));return function(t){return e.apply(this,arguments)}}(),[u,v,R,k]),collectionId:r,setStatus:n,status:t,verificationCode:l}}(),ue=de.add,pe=de.status,fe=de.collectionId,ve=de.verificationCode;(0,i.useEffect)((function(){return function(){return G(null)}}),[]),(0,i.useEffect)((function(){return function(){return F("")}}),[]);var me=(0,i.useCallback)((function(e){var t=e.formattedAssets,n=e.gridItems,o=e.isCopyToCollection,i=e.mappedAssetType,s=e.redirectToCollectionDetailsPage,a=e.pageSection,c=e.listId;F(i),G(t),ee(a),oe(c),o&&Z(!0),n&&K(n),s&&le({shouldHandleRedirect:!0,redirectToCollectionDetailsPage:s}),r(!0)}),[]);return(0,i.useEffect)((function(){(0,s.DZ)({showAddToCollectionModal:me,isLoggedInUser:ie})}),[ie,me]),{addToCollectionViewsProps:(0,i.useMemo)((function(){return{assets:L,assetType:H,collectionId:fe,collectionTitle:J,gridItems:X,isDialogActive:o,isSnackBarOpen:u,onAddToCollections:function(e){var t=e.id,n=e.title,o=e.verificationCode,i=e.groupedOptions,s=e.pageSection;return N(n),r(!1),v(!0),ue({assetType:H,assets:L,gridItems:X,groupedOptions:i,id:t,title:n,verificationCode:o,pageSection:s||$,listId:ne})},onAlertSnackbarClose:function(){return v(!1)},redirectToCDPAction:ce,setIsDialogActive:r,showCopyToModalTitle:_,status:pe,verificationCode:ve}}),[L,X,ue,ne,$,H,fe,J,o,u,ce,_,pe,ve]),addToCollectionViewsHandler:(0,i.useCallback)((function(e){var t=e.assets,n=e.gridItems,o=e.isCopyToCollection,i=void 0!==o&&o,r=e.redirectToCollectionDetailsPage,c=e.pageSection,l=e.listId;if(ie){var d=function(e){return[].concat(e)}(t);me({formattedAssets:d,gridItems:n,isCopyToCollection:i,mappedAssetType:(0,a.A8)(d[0]),redirectToCollectionDetailsPage:r,pageSection:c,listId:l})}else(0,s.JO)({assets:t,gridItems:n,signUpPath:re})}),[ie,me,re]),AddToCollectionViews:Y}}},2297:function(e,t,n){n.d(t,{JO:function(){return s},DZ:function(){return a}});var o=n(11409),i="add_to_collection_asset",r="add_to_collection_grid_items",s=function(e){var t=e.assets,n=e.gridItems,o=e.signUpPath;window&&(t&&window.sessionStorage.setItem(i,JSON.stringify(t)),n&&window.sessionStorage.setItem(r,JSON.stringify(n)),window.location=o)},a=function(e){var t=e.showAddToCollectionModal,n=e.isLoggedInUser;if(void 0!==n){if(n){var s=window.sessionStorage.getItem(i),a=window.sessionStorage.getItem(r),c=function(e){return e&&"undefined"!==e};if(c(s)&&c(a)){var l=JSON.parse(s),d=JSON.parse(a),u=[].concat(l);t({formattedAssets:u,gridItems:d,mappedAssetType:(0,o.A8)(u[0]),isCopyToCollection:!1,redirectToCollectionDetailsPage:!1})}}window.sessionStorage.removeItem(i),window.sessionStorage.removeItem(r)}}},34552:function(e,t,n){n.d(t,{y:function(){return o}});var o=function(e){return[e.subPage,e.pageType].join("-")}},10483:function(e,t,n){n.d(t,{J:function(){return a}});var o=n(67294),i=n(64223),r=n(29996),s=n(94429),a=function(){var e=(0,r.yh)().analytics,t=(0,s.Y)().getSearchContext;return(0,o.useCallback)((function(n){var o=n.collectionId,r=n.collectionName,s=n.gridItems,a=n.assets,c=n.pageSection,l=n.listId;e.productAddedToWishlist({products:a.map((function(e){return(0,i.bR)({asset:e,getSearchContext:t,gridItems:s,pageSection:c})})),wishlist_id:o,wishlist_name:r,list_id:null!==l&&void 0!==l?l:""})}),[e,t])}},70790:function(e,t,n){n.d(t,{j:function(){return s}});var o=n(92252),i=n(88041),r=n(1434),s=function(){var e=(0,i.D)(),t=e.isBrandEnterprise,n=e.isBrandSstk,s=(0,r.p)();return t&&(null===s||void 0===s?void 0:s[o.vb])||n&&(null===s||void 0===s?void 0:s[o.rl])}},26237:function(e,t,n){n.d(t,{w:function(){return u}});var o=n(30266),i=n(809),r=n.n(i),s=n(67294),a=n(88789),c=n(19846),l=n(65306),d=n(85884),u=function(){var e=(0,s.useState)({status:"",error:void 0}),t=e[0],n=e[1],i=(0,s.useCallback)(function(){var e=(0,o.Z)(r().mark((function e(t){var o,i,s,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.collection,i=t.mediaItem,s=(0,a.df)({urlParams:{id:o.id}}).formattedUrl,u={data:{id:o.id,relationships:{"cover-item":{data:{id:"".concat(i.id),type:l.A8}}},type:l.Ul}},e.prev=3,n({status:c.MR,error:void 0}),e.next=7,d.uS.patch(s,u);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),n({status:c.cM,error:e.t0});case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),[]);return{status:t,setStatus:n,setAsCover:i}}}}]);